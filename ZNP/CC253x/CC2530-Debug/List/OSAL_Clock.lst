###############################################################################
#
# IAR C/C++ Compiler V9.30.1.3056 for 8051                21/Nov/2018  13:52:13
# Copyright 2004-2015 IAR Systems AB.
# Standalone license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Components\osal\common\OSAL_Clock.c
#    Command line       =  
#        -f "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\Source\znp.cfg"
#        (-DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        "-DZSTACK_DEVICE_BUILD=(DEVICE_BUILD_COORDINATOR | DEVICE_BUILD_ROUTER
#        | DEVICE_BUILD_ENDDEVICE)" -DNWK_AUTO_POLL -DZNP_RUN_WDOG=FALSE
#        -DZNP_UART_BAUD=HAL_UART_BR_115200 -DZIGBEEPRO -DZIGBEE_FRAGMENTATION
#        -DINTER_PAN -DOSAL_CLOCK -DOSAL_SAPI=FALSE -DSAPI_CB_FUNC=FALSE
#        -DHOLD_AUTO_START -DNV_RESTORE -DNV_INIT -DNUM_DISC_ATTEMPTS=0
#        -DMT_UTIL_FUNC -DMT_SYS_FUNC -DMT_AF_FUNC -DMT_SAPI_FUNC
#        -DMT_SAPI_CB_FUNC -DMT_ZDO_CB_FUNC -DMT_ZDO_FUNC -DMT_ZDO_MGMT
#        -DMT_ZDO_EXTENSIONS -DMT_APP_FUNC) -f
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\Tools\CC2530DB\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFFF
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07,
#        0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C,
#        0x0D}" -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
#        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
#        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
#        -DREJOIN_POLL_RATE=440) -f "D:\1.embedded\kit\cc2530\Reference\Z-Stack
#        Mesh 1.0.0\Projects\zstack\ZNP\CC253x\..\..\Tools\CC2530DB\f8wZCL.cfg"
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Components\osal\common\OSAL_Clock.c" -D FEATURE_SYSTEM_STATS -D
#        POWER_SAVING -lC "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\CC2530-Debug\List" -lA
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\CC2530-Debug\List" --diag_suppress
#        Pe001,Pa010 -o "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\CC2530-Debug\Obj" -e --no_code_motion
#        --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 16 -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\Source\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\Source\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\SE\Source\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\ZMain\TI2530ZNP\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\hal\include\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\hal\target\CC2530ZNP\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\mac\include\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\mac\high_level\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\mac\low_level\srf04\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\mt\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\osal\include\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\services\saddr\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\services\sdata\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\af\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\nwk\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\sapi\"
#        -I "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\sec\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\sys\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\zcl\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\stack\zdo\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\zmac\" -I
#        "D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\..\..\..\..\Components\zmac\f8w\"
#        -Ohz --require_prototypes
#    List file          =  
#        D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\CC2530-Debug\List\OSAL_Clock.lst
#    Object file        =  
#        D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh
#        1.0.0\Projects\zstack\ZNP\CC253x\CC2530-Debug\Obj\OSAL_Clock.r51
#
###############################################################################

D:\1.embedded\kit\cc2530\Reference\Z-Stack Mesh 1.0.0\Components\osal\common\OSAL_Clock.c
      1          /******************************************************************************
      2            Filename:       OSAL_Clock.c
      3            Revised:        $Date: 2012-02-26 13:15:18 -0800 (Sun, 26 Feb 2012) $
      4            Revision:       $Revision: 29523 $
      5          
      6            Description:    OSAL Clock definition and manipulation functions.
      7          
      8            Copyright 2008-2012 Texas Instruments Incorporated. All rights reserved.
      9          
     10            IMPORTANT: Your use of this Software is limited to those specific rights
     11            granted under the terms of a software license agreement between the user
     12            who downloaded the software, his/her employer (which must be your employer)
     13            and Texas Instruments Incorporated (the "License"). You may not use this
     14            Software unless you agree to abide by the terms of the License. The License
     15            limits your use, and you acknowledge, that the Software may not be modified,
     16            copied or distributed unless embedded on a Texas Instruments microcontroller
     17            or used solely and exclusively in conjunction with a Texas Instruments radio
     18            frequency transceiver, which is integrated into your product. Other than for
     19            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     20            works of, modify, distribute, perform, display or sell this Software and/or
     21            its documentation for any purpose.
     22          
     23            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     24            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     25            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     26            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     27            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     28            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     29            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     30            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     31            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     32            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     33            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     34          
     35            Should you have any questions regarding your right to use this Software,
     36            contact Texas Instruments Incorporated at www.TI.com.
     37          ******************************************************************************/
     38          
     39          /*********************************************************************
     40           * INCLUDES
     41           */
     42          
     43          #include "comdef.h"
     44          #include "hal_board.h"

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1
     45          #include "OnBoard.h"
     46          #include "OSAL.h"
     47          #include "OSAL_Clock.h"
     48          
     49          /*********************************************************************
     50           * MACROS
     51           */
     52          
     53          #define	YearLength(yr)	((uint16)(IsLeapYear(yr) ? 366 : 365))
     54          
     55          /*********************************************************************
     56           * CONSTANTS
     57           */
     58          
     59          #define	BEGYEAR  2000     //  UTC started at 00:00:00 January 1, 2000
     60          
     61          #define	DAY      86400UL  // 24 hours * 60 minutes * 60 seconds
     62          
     63          /* Check Below for an explanation */
     64          #define COUNTER_TICK320US 204775UL 
     65          
     66          /* converted COUNTER_TICK320US from 320us ticks to ms */
     67          #define COUNTER_ELAPSEDMS 65528UL   
     68          
     69          /* 
     70           * Each tick is 320us so a value greater than 3 implies 
     71           * that atleast one millisecond has elapsed 320us*4 > 1 ms 
     72           */
     73          #define TIMER_CLOCK_UPDATE 4 
     74                                            
     75          /*********************************************************************
     76           * TYPEDEFS
     77           */
     78          
     79          /*********************************************************************
     80           * GLOBAL VARIABLES
     81           */
     82          
     83          /*********************************************************************
     84           * EXTERNAL VARIABLES
     85           */
     86          
     87          /*********************************************************************
     88           * EXTERNAL FUNCTIONS
     89           */
     90          extern uint32 macMcuPrecisionCount(void);
     91          
     92          #if (defined HAL_MCU_CC2430) || (defined HAL_MCU_CC2530) || (defined HAL_MCU_CC2533)
     93          
     94            /*  This function is used to divide a 31 bit dividend by a 16 bit
     95             *  divisor and return a packed 16 bit quotient and 16 bit
     96             *  remainder.
     97             *
     98             *  Note: This routine takes ~25.6us @32MHz. With C overhead, the
     99             *        time is ~32us.
    100             *
    101             *  dividend - 31 bit dividend.
    102             *  divisor - 16 bit divisor.
    103             *
    104             *  return - MSW divisor; LSW quotient
    105             */
    106            extern __near_func uint32 osalMcuDivide31By16To16( uint32 dividend, uint16 divisor );
    107          
    108            #define CONVERT_320US_TO_MS_ELAPSED_REMAINDER( x, y, z ) st( \
    109                                                                         \
    110              /* The 16 bit quotient is in MSW and */                    \
    111              /* the 16 bit remainder is in LSW. */                      \
    112              x = osalMcuDivide31By16To16( x, 25 );                      \
    113                                                                         \
    114              /* Add quotient to y */                                    \
    115              y += (x >> 16);                                            \
    116                                                                         \
    117              /* Copy remainder to z */                                  \
    118              z = (uint16)(x & 0x0FFFF);                                 \
    119            )
    120            
    121            #define CONVERT_MS_TO_S_ELAPSED_REMAINDER( x, y, z ) st(     \
    122                                                                         \
    123              /* The 16 bit quotient is in MSW and */                    \
    124              /* the 16 bit remainder is in LSW. */                      \
    125              x = osalMcuDivide31By16To16( x, 1000 );                    \
    126                                                                         \
    127              /* Add quotient to y */                                    \
    128              y += (x >> 16);                                            \
    129                                                                         \
    130              /* Copy remainder to z */                                  \
    131              z = (uint16)(x & 0x0FFFF);                                 \
    132            )
    133          
    134          #else /* (defined HAL_MCU_CC2430) || (defined HAL_MCU_CC2530) || (defined HAL_MCU_CC2533) */
    135          
    136            #define CONVERT_320US_TO_MS_ELAPSED_REMAINDER( x, y, z ) st( \
    137              y += x / 25;                                               \
    138              z = x % 25;                                                \
    139            )
    140            
    141            #define CONVERT_MS_TO_S_ELAPSED_REMAINDER( x, y, z ) st(     \
    142              y += x / 1000;                                             \
    143              z = x % 1000;                                              \
    144            )
    145          #endif /* (defined HAL_MCU_CC2430) || (defined HAL_MCU_CC2530) || (defined HAL_MCU_CC2533) */
    146          
    147          /*********************************************************************
    148           * LOCAL VARIABLES
    149           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          static uint32 previousMacTimerTick = 0;
   \                     previousMacTimerTick:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    151          static uint16 remUsTicks = 0;
   \                     remUsTicks:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    152          static uint32 timeMSec = 0;
   \                     timeMSec:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    153          
    154          // number of seconds since 0 hrs, 0 minutes, 0 seconds, on the
    155          // 1st of January 2000 UTC

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    156          UTCTime OSAL_timeSeconds = 0;
   \                     OSAL_timeSeconds:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    157          
    158          /*********************************************************************
    159           * LOCAL FUNCTION PROTOTYPES
    160           */
    161          static uint8 monthLength( uint8 lpyr, uint8 mon );
    162          
    163          static void osalClockUpdate( uint32 elapsedMSec );
    164          
    165          /*********************************************************************
    166           * FUNCTIONS
    167           *********************************************************************/
    168          
    169          /*********************************************************************
    170           * @fn      osalTimeUpdate
    171           *
    172           * @brief   Uses the free running rollover count of the MAC backoff timer;
    173           *          this timer runs freely with a constant 320 usec interval.  The
    174           *          count of 320-usec ticks is converted to msecs and used to update
    175           *          the OSAL clock and Timers by invoking osalClockUpdate() and
    176           *          osalTimerUpdate().  This function is intended to be invoked
    177           *          from the background, not interrupt level.
    178           *
    179           * @param   None.
    180           *
    181           * @return  None.
    182           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    183          void osalTimeUpdate( void )
   \                     osalTimeUpdate:
    184          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000                REQUIRE ?V10
   \   000000                REQUIRE ?V11
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 0
    185            halIntState_t intState;
    186            uint32 tmp;
    187            uint32 ticks320us;
    188            uint32 elapsedMSec = 0;
   \   000005   75..00       MOV     ?V4,#0x0
   \   000008   75..00       MOV     ?V5,#0x0
   \   00000B   75..00       MOV     ?V6,#0x0
   \   00000E   75..00       MOV     ?V7,#0x0
    189          
    190            HAL_ENTER_CRITICAL_SECTION(intState);
   \   000011   AEA8         MOV     R6,0xa8+0x0
   \   000013   C2AF         CLR     0xa8.7
    191            // Get the free-running count of 320us timer ticks
    192            tmp = macMcuPrecisionCount();
   \   000015                ; Setup parameters for call to function macMcuPrecisionCount
   \   000015   12....       LCALL   `??macMcuPrecisionCount::?relay`; Banked call to: macMcuPrecisionCount
   \   000018   8A..         MOV     ?V0,R2
   \   00001A   8B..         MOV     ?V1,R3
   \   00001C   8C..         MOV     ?V2,R4
   \   00001E   8D..         MOV     ?V3,R5
    193            HAL_EXIT_CRITICAL_SECTION(intState);
   \   000020   EE           MOV     A,R6
   \   000021   A2E7         MOV     C,0xE0 /* A   */.7
   \   000023   E4           CLR     A
   \   000024   33           RLC     A
   \   000025   F9           MOV     R1,A
   \   000026   EE           MOV     A,R6
   \   000027   A2E7         MOV     C,0xE0 /* A   */.7
   \   000029   92AF         MOV     0xa8.7,C
    194            
    195            if ( tmp != previousMacTimerTick )
   \   00002B   90....       MOV     DPTR,#previousMacTimerTick
   \   00002E   78..         MOV     R0,#?V0
   \   000030   12....       LCALL   ?L_EQ_X
   \   000033   7003         JNZ     $+5
   \   000035   02....       LJMP    ??osalTimeUpdate_0 & 0xFFFF
    196            {
    197              // Calculate the elapsed ticks of the free-running timer.
    198              ticks320us = (tmp - previousMacTimerTick) & 0xffffffffu;
   \   000038   8A..         MOV     ?V8,R2
   \   00003A   8B..         MOV     ?V9,R3
   \   00003C   8C..         MOV     ?V10,R4
   \   00003E   8D..         MOV     ?V11,R5
   \   000040   90....       MOV     DPTR,#previousMacTimerTick
   \   000043   78..         MOV     R0,#?V8
   \   000045   12....       LCALL   ?L_SUB_X
    199          
    200              if (ticks320us >= TIMER_CLOCK_UPDATE )
   \   000048   90....       MOV     DPTR,#__Constant_4
   \   00004B   78..         MOV     R0,#?V8
   \   00004D   12....       LCALL   ?UL_GE_X
   \   000050   4003         JC      $+5
   \   000052   02....       LJMP    ??osalTimeUpdate_0 & 0xFFFF
    201              {
    202                // Store the MAC Timer tick count for the next time through this function.
    203                previousMacTimerTick = tmp;
   \   000055   90....       MOV     DPTR,#previousMacTimerTick
   \   000058   78..         MOV     R0,#?V0
   \   00005A   12....       LCALL   ?L_MOV_TO_X
   \   00005D   8010         SJMP    ??osalTimeUpdate_1
    204                
    205                /*
    206                 * remUsTicks can have a maximum value of 24 (Since remusTicks got by mod 
    207                 * of 25). The value of COUNTER_TICK320US is a multiple of 25 and the 
    208                 * quotient of  CONVERT_320US_TO_MS_ELAPSED_REMAINDER() does not exceed 
    209                 * 0xFFFF or 16 bit.
    210                 */
    211                while(ticks320us >= COUNTER_TICK320US)
    212                {
    213                  ticks320us  -= COUNTER_TICK320US;
   \                     ??osalTimeUpdate_2:
   \   00005F   90....       MOV     DPTR,#__Constant_fffce019
   \   000062   78..         MOV     R0,#?V8
   \   000064   12....       LCALL   ?L_ADD_X
    214                  elapsedMSec += COUNTER_ELAPSEDMS;
   \   000067   90....       MOV     DPTR,#__Constant_fff8
   \   00006A   78..         MOV     R0,#?V4
   \   00006C   12....       LCALL   ?L_ADD_X
    215                }
   \                     ??osalTimeUpdate_1:
   \   00006F   90....       MOV     DPTR,#__Constant_31fe7
   \   000072   78..         MOV     R0,#?V8
   \   000074   12....       LCALL   ?UL_GE_X
   \   000077   40E6         JC      ??osalTimeUpdate_2
    216              
    217                // update converted number with remaining ticks from loop and the
    218                // accumulated remainder from loop
    219                tmp = (ticks320us * 8) + remUsTicks;
    220          
    221                // Convert the 320 us ticks into milliseconds and a remainder
    222                CONVERT_320US_TO_MS_ELAPSED_REMAINDER( tmp, elapsedMSec, remUsTicks );
   \   000079                ; Setup parameters for call to function osalMcuDivide31By16To16
   \   000079   75..19       MOV     ?V0,#0x19
   \   00007C   75..00       MOV     ?V1,#0x0
   \   00007F   78..         MOV     R0,#?V0
   \   000081   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000084   7403         MOV     A,#0x3
   \   000086   78..         MOV     R0,#?V8
   \   000088   12....       LCALL   ?L_SHL
   \   00008B   90....       MOV     DPTR,#remUsTicks
   \   00008E   E0           MOVX    A,@DPTR
   \   00008F   F5..         MOV     ?V0,A
   \   000091   A3           INC     DPTR
   \   000092   E0           MOVX    A,@DPTR
   \   000093   F5..         MOV     ?V1,A
   \   000095   E4           CLR     A
   \   000096   F5..         MOV     ?V2,A
   \   000098   F5..         MOV     ?V3,A
   \   00009A   78..         MOV     R0,#?V8
   \   00009C   79..         MOV     R1,#?V0
   \   00009E   12....       LCALL   ?L_ADD
   \   0000A1   AA..         MOV     R2,?V8
   \   0000A3   AB..         MOV     R3,?V9
   \   0000A5   AC..         MOV     R4,?V10
   \   0000A7   AD..         MOV     R5,?V11
   \   0000A9   12....       LCALL   osalMcuDivide31By16To16 & 0xFFFF
   \   0000AC   7402         MOV     A,#0x2
   \   0000AE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000B1   8A..         MOV     ?V8,R2
   \   0000B3   8B..         MOV     ?V9,R3
   \   0000B5   8C..         MOV     ?V10,R4
   \   0000B7   8D..         MOV     ?V11,R5
   \   0000B9   7410         MOV     A,#0x10
   \   0000BB   78..         MOV     R0,#?V8
   \   0000BD   12....       LCALL   ?UL_SHR
   \   0000C0   78..         MOV     R0,#?V4
   \   0000C2   79..         MOV     R1,#?V8
   \   0000C4   12....       LCALL   ?L_ADD
   \   0000C7   90....       MOV     DPTR,#remUsTicks
   \   0000CA   EA           MOV     A,R2
   \   0000CB   F0           MOVX    @DPTR,A
   \   0000CC   A3           INC     DPTR
   \   0000CD   EB           MOV     A,R3
   \   0000CE   F0           MOVX    @DPTR,A
    223                
    224                // Update OSAL Clock and Timers
    225                osalClockUpdate( elapsedMSec );
   \   0000CF   A2AF         MOV     C,0xa8.7
   \   0000D1   E4           CLR     A
   \   0000D2   33           RLC     A
   \   0000D3   FE           MOV     R6,A
   \   0000D4   C2AF         CLR     0xa8.7
   \   0000D6   90....       MOV     DPTR,#timeMSec
   \   0000D9   78..         MOV     R0,#?V4
   \   0000DB   12....       LCALL   ?L_ADD_TO_X
   \   0000DE   90....       MOV     DPTR,#__Constant_3e8
   \   0000E1   78..         MOV     R0,#?V0
   \   0000E3   12....       LCALL   ?L_MOV_X
   \   0000E6   90....       MOV     DPTR,#timeMSec
   \   0000E9   78..         MOV     R0,#?V0
   \   0000EB   12....       LCALL   ?UL_GT_X
   \   0000EE   4041         JC      ??osalTimeUpdate_3
   \   0000F0                ; Setup parameters for call to function osalMcuDivide31By16To16
   \   0000F0   75..E8       MOV     ?V0,#-0x18
   \   0000F3   75..03       MOV     ?V1,#0x3
   \   0000F6   78..         MOV     R0,#?V0
   \   0000F8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000FB   90....       MOV     DPTR,#timeMSec
   \   0000FE   12....       LCALL   ?XLOAD_R2345
   \   000101   12....       LCALL   osalMcuDivide31By16To16 & 0xFFFF
   \   000104   7402         MOV     A,#0x2
   \   000106   12....       LCALL   ?DEALLOC_XSTACK8
   \   000109   8A..         MOV     ?V8,R2
   \   00010B   8B..         MOV     ?V9,R3
   \   00010D   8A..         MOV     ?V0,R2
   \   00010F   8B..         MOV     ?V1,R3
   \   000111   8C..         MOV     ?V2,R4
   \   000113   8D..         MOV     ?V3,R5
   \   000115   7410         MOV     A,#0x10
   \   000117   78..         MOV     R0,#?V0
   \   000119   12....       LCALL   ?UL_SHR
   \   00011C   90....       MOV     DPTR,#OSAL_timeSeconds
   \   00011F   78..         MOV     R0,#?V0
   \   000121   12....       LCALL   ?L_ADD_TO_X
   \   000124   A8..         MOV     R0,?V8
   \   000126   A9..         MOV     R1,?V9
   \   000128   E4           CLR     A
   \   000129   FA           MOV     R2,A
   \   00012A   FB           MOV     R3,A
   \   00012B   90....       MOV     DPTR,#timeMSec
   \   00012E   12....       LCALL   ?XSTORE_R0123
   \                     ??osalTimeUpdate_3:
   \   000131   EE           MOV     A,R6
   \   000132   A2E0         MOV     C,0xE0 /* A   */.0
   \   000134   92AF         MOV     0xa8.7,C
    226                osalTimerUpdate( elapsedMSec );
   \   000136                ; Setup parameters for call to function osalTimerUpdate
   \   000136   AA..         MOV     R2,?V4
   \   000138   AB..         MOV     R3,?V5
   \   00013A   AC..         MOV     R4,?V6
   \   00013C   AD..         MOV     R5,?V7
   \   00013E   12....       LCALL   `??osalTimerUpdate::?relay`; Banked call to: osalTimerUpdate
    227              }
    228            }
    229          }
   \                     ??osalTimeUpdate_0:
   \   000141                REQUIRE ?Subroutine0
   \   000141                REQUIRE _A_IEN0
   \   000141                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F0C         MOV     R7,#0xc
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    230          
    231          /*********************************************************************
    232           * @fn      osalClockUpdate
    233           *
    234           * @brief   Updates the OSAL Clock time with elapsed milliseconds.
    235           *
    236           * @param   elapsedMSec - elapsed milliseconds
    237           *
    238           * @return  none
    239           */
    240          static void osalClockUpdate( uint32 elapsedMSec )
    241          {
    242            uint32 tmp;
    243            halIntState_t intState;
    244            
    245            HAL_ENTER_CRITICAL_SECTION(intState);
    246            // Add elapsed milliseconds to the saved millisecond portion of time
    247            timeMSec += elapsedMSec;
    248          
    249            // Roll up milliseconds to the number of seconds
    250            if ( timeMSec >= 1000 )
    251            {
    252              tmp = timeMSec;
    253              CONVERT_MS_TO_S_ELAPSED_REMAINDER(tmp, OSAL_timeSeconds, timeMSec);
    254            }
    255            HAL_EXIT_CRITICAL_SECTION(intState);
    256          }
    257          
    258          #ifdef HAL_BOARD_CC2538
    259          /*********************************************************************
    260           * @fn      osalAdjustTimer
    261           *
    262           * @brief   Updates the OSAL Clock and Timer with elapsed milliseconds.
    263           *
    264           * @param   MSec - elapsed milliseconds
    265           *
    266           * @return  none
    267           */
    268          void osalAdjustTimer(uint32 Msec )
    269          {
    270            /* Disable SysTick interrupts */ 
    271            SysTickIntDisable(); 
    272            
    273            osalClockUpdate(Msec);
    274            osalTimerUpdate(Msec);
    275            
    276            /* Enable SysTick interrupts */ 
    277            SysTickIntEnable(); 
    278          }
    279          #endif /* HAL_BOARD_CC2538 */
    280          
    281          /*********************************************************************
    282           * @fn      osal_setClock
    283           *
    284           * @brief   Set the new time.  This will only set the seconds portion
    285           *          of time and doesn't change the factional second counter.
    286           *
    287           * @param   newTime - number of seconds since 0 hrs, 0 minutes,
    288           *                    0 seconds, on the 1st of January 2000 UTC
    289           *
    290           * @return  none
    291           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    292          void osal_setClock( UTCTime newTime )
   \                     osal_setClock:
    293          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0,R2
   \   000007   8B..         MOV     ?V1,R3
   \   000009   8C..         MOV     ?V2,R4
   \   00000B   8D..         MOV     ?V3,R5
    294            HAL_CRITICAL_STATEMENT(OSAL_timeSeconds = newTime);
   \   00000D   A9A8         MOV     R1,0xa8+0x0
   \   00000F   C2AF         CLR     0xa8.7
   \   000011   90....       MOV     DPTR,#OSAL_timeSeconds
   \   000014   78..         MOV     R0,#?V0
   \   000016   12....       LCALL   ?L_MOV_TO_X
   \   000019   E9           MOV     A,R1
   \   00001A   A2E7         MOV     C,0xE0 /* A   */.7
   \   00001C   E4           CLR     A
   \   00001D   33           RLC     A
   \   00001E   F8           MOV     R0,A
   \   00001F   E9           MOV     A,R1
   \   000020   A2E7         MOV     C,0xE0 /* A   */.7
   \   000022   92AF         MOV     0xa8.7,C
    295          }
   \   000024   7F04         MOV     R7,#0x4
   \   000026   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000029                REQUIRE _A_IEN0
    296          
    297          /*********************************************************************
    298           * @fn      osal_getClock
    299           *
    300           * @brief   Gets the current time.  This will only return the seconds
    301           *          portion of time and doesn't include the factional second
    302           *          counter.
    303           *
    304           * @param   none
    305           *
    306           * @return  number of seconds since 0 hrs, 0 minutes, 0 seconds,
    307           *          on the 1st of January 2000 UTC
    308           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    309          UTCTime osal_getClock( void )
   \                     osal_getClock:
    310          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    311            return ( OSAL_timeSeconds );
   \   000004   90....       MOV     DPTR,#OSAL_timeSeconds
   \   000007   12....       LCALL   ?XLOAD_R2345
   \   00000A   D083         POP     DPH
   \   00000C   D082         POP     DPL
   \   00000E   02....       LJMP    ?BRET
    312          }
    313          
    314          /*********************************************************************
    315           * @fn      osal_ConvertUTCTime
    316           *
    317           * @brief   Converts UTCTime to UTCTimeStruct
    318           *
    319           * @param   tm - pointer to breakdown struct
    320           *
    321           * @param   secTime - number of seconds since 0 hrs, 0 minutes,
    322           *          0 seconds, on the 1st of January 2000 UTC
    323           *
    324           * @return  none
    325           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    326          void osal_ConvertUTCTime( UTCTimeStruct *tm, UTCTime secTime )
   \                     osal_ConvertUTCTime:
    327          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000                REQUIRE ?V10
   \   000000                REQUIRE ?V11
   \   000000                REQUIRE ?V12
   \   000000                REQUIRE ?V13
   \   000000                REQUIRE ?V14
   \   000000                REQUIRE ?V15
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   7418         MOV     A,#0x18
   \   00000B   12....       LCALL   ?XSTACK_DISP0_8
   \   00000E   78..         MOV     R0,#?V4
   \   000010   12....       LCALL   ?L_MOV_X
    328            // calculate the time less than a day - hours, minutes, seconds
    329            {
    330              uint32 day = secTime % DAY;
   \   000013   85....       MOV     ?V0,?V4
   \   000016   85....       MOV     ?V1,?V5
   \   000019   85....       MOV     ?V2,?V6
   \   00001C   85....       MOV     ?V3,?V7
   \   00001F   90....       MOV     DPTR,#__Constant_15180
   \   000022   78..         MOV     R0,#?V8
   \   000024   12....       LCALL   ?L_MOV_X
   \   000027   78..         MOV     R0,#?V0
   \   000029   79..         MOV     R1,#?V8
   \   00002B   12....       LCALL   ?UL_DIV_MOD
    331              tm->seconds = day % 60UL;
   \   00002E   85....       MOV     ?V0,?V8
   \   000031   85....       MOV     ?V1,?V9
   \   000034   85....       MOV     ?V2,?V10
   \   000037   85....       MOV     ?V3,?V11
   \   00003A   90....       MOV     DPTR,#__Constant_3c
   \   00003D   78..         MOV     R0,#?V12
   \   00003F   12....       LCALL   ?L_MOV_X
   \   000042   78..         MOV     R0,#?V0
   \   000044   79..         MOV     R1,#?V12
   \   000046   12....       LCALL   ?UL_DIV_MOD
   \   000049   8E82         MOV     DPL,R6
   \   00004B   8F83         MOV     DPH,R7
   \   00004D   E5..         MOV     A,?V12
   \   00004F   F0           MOVX    @DPTR,A
    332              tm->minutes = (day % 3600UL) / 60UL;
   \   000050   85....       MOV     ?V12,?V8
   \   000053   85....       MOV     ?V13,?V9
   \   000056   85....       MOV     ?V14,?V10
   \   000059   85....       MOV     ?V15,?V11
   \   00005C   90....       MOV     DPTR,#__Constant_e10
   \   00005F   78..         MOV     R0,#?V0
   \   000061   12....       LCALL   ?L_MOV_X
   \   000064   78..         MOV     R0,#?V12
   \   000066   79..         MOV     R1,#?V0
   \   000068   12....       LCALL   ?UL_DIV_MOD
   \   00006B   90....       MOV     DPTR,#__Constant_3c
   \   00006E   78..         MOV     R0,#?V12
   \   000070   12....       LCALL   ?L_MOV_X
   \   000073   78..         MOV     R0,#?V0
   \   000075   79..         MOV     R1,#?V12
   \   000077   12....       LCALL   ?UL_DIV_MOD
   \   00007A   8E82         MOV     DPL,R6
   \   00007C   8F83         MOV     DPH,R7
   \   00007E   A3           INC     DPTR
   \   00007F   E5..         MOV     A,?V0
   \   000081   F0           MOVX    @DPTR,A
    333              tm->hour = day / 3600UL;
   \   000082   90....       MOV     DPTR,#__Constant_e10
   \   000085   78..         MOV     R0,#?V0
   \   000087   12....       LCALL   ?L_MOV_X
   \   00008A   78..         MOV     R0,#?V8
   \   00008C   79..         MOV     R1,#?V0
   \   00008E   12....       LCALL   ?UL_DIV_MOD
   \   000091   8E82         MOV     DPL,R6
   \   000093   8F83         MOV     DPH,R7
   \   000095   A3           INC     DPTR
   \   000096   A3           INC     DPTR
   \   000097   E5..         MOV     A,?V8
   \   000099   F0           MOVX    @DPTR,A
    334            }
    335          
    336            // Fill in the calendar - day, month, year
    337            {
    338              uint16 numDays = secTime / DAY;
   \   00009A   90....       MOV     DPTR,#__Constant_15180
   \   00009D   78..         MOV     R0,#?V0
   \   00009F   12....       LCALL   ?L_MOV_X
   \   0000A2   78..         MOV     R0,#?V4
   \   0000A4   79..         MOV     R1,#?V0
   \   0000A6   12....       LCALL   ?UL_DIV_MOD
   \   0000A9   85....       MOV     ?V2,?V4
   \   0000AC   85....       MOV     ?V3,?V5
    339              tm->year = BEGYEAR;
   \   0000AF   8E82         MOV     DPL,R6
   \   0000B1   8F83         MOV     DPH,R7
   \   0000B3   A3           INC     DPTR
   \   0000B4   A3           INC     DPTR
   \   0000B5   A3           INC     DPTR
   \   0000B6   A3           INC     DPTR
   \   0000B7   A3           INC     DPTR
   \   0000B8   74D0         MOV     A,#-0x30
   \   0000BA   F0           MOVX    @DPTR,A
   \   0000BB   A3           INC     DPTR
   \   0000BC   7407         MOV     A,#0x7
   \   0000BE   801E         SJMP    ??osal_ConvertUTCTime_0
    340              while ( numDays >= YearLength( tm->year ) )
    341              {
    342                numDays -= YearLength( tm->year );
   \                     ??osal_ConvertUTCTime_1:
   \   0000C0   786D         MOV     R0,#0x6d
   \                     ??osal_ConvertUTCTime_2:
   \   0000C2   E5..         MOV     A,?V2
   \   0000C4   98           SUBB    A,R0
   \   0000C5   F5..         MOV     ?V2,A
   \   0000C7   E5..         MOV     A,?V3
   \   0000C9   9401         SUBB    A,#0x1
   \   0000CB   F5..         MOV     ?V3,A
    343                tm->year++;
   \   0000CD   8E82         MOV     DPL,R6
   \   0000CF   8F83         MOV     DPH,R7
   \   0000D1   A3           INC     DPTR
   \   0000D2   A3           INC     DPTR
   \   0000D3   A3           INC     DPTR
   \   0000D4   A3           INC     DPTR
   \   0000D5   A3           INC     DPTR
   \   0000D6   E0           MOVX    A,@DPTR
   \   0000D7   2401         ADD     A,#0x1
   \   0000D9   F0           MOVX    @DPTR,A
   \   0000DA   A3           INC     DPTR
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   3400         ADDC    A,#0x0
   \                     ??osal_ConvertUTCTime_0:
   \   0000DE   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0000E1   12....       LCALL   ?US_DIV_MOD
   \   0000E4   8B..         MOV     ?V1,R3
   \   0000E6   EA           MOV     A,R2
   \   0000E7   45..         ORL     A,?V1
   \   0000E9   601B         JZ      ??osal_ConvertUTCTime_3
   \   0000EB   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   0000EE   12....       LCALL   ?US_DIV_MOD
   \   0000F1   8B..         MOV     ?V1,R3
   \   0000F3   EA           MOV     A,R2
   \   0000F4   45..         ORL     A,?V1
   \   0000F6   6012         JZ      ??osal_ConvertUTCTime_4
   \   0000F8   8E82         MOV     DPL,R6
   \   0000FA   8F83         MOV     DPH,R7
   \   0000FC   A3           INC     DPTR
   \   0000FD   A3           INC     DPTR
   \   0000FE   A3           INC     DPTR
   \   0000FF   A3           INC     DPTR
   \   000100   A3           INC     DPTR
   \   000101   E0           MOVX    A,@DPTR
   \   000102   5403         ANL     A,#0x3
   \   000104   7004         JNZ     ??osal_ConvertUTCTime_4
   \                     ??osal_ConvertUTCTime_3:
   \   000106   786E         MOV     R0,#0x6e
   \   000108   8002         SJMP    ??osal_ConvertUTCTime_5
   \                     ??osal_ConvertUTCTime_4:
   \   00010A   786D         MOV     R0,#0x6d
   \                     ??osal_ConvertUTCTime_5:
   \   00010C   E5..         MOV     A,?V2
   \   00010E   98           SUBB    A,R0
   \   00010F   E5..         MOV     A,?V3
   \   000111   9401         SUBB    A,#0x1
   \   000113   8E82         MOV     DPL,R6
   \   000115   8F83         MOV     DPH,R7
   \   000117   A3           INC     DPTR
   \   000118   A3           INC     DPTR
   \   000119   A3           INC     DPTR
   \   00011A   A3           INC     DPTR
   \   00011B   4030         JC      ??osal_ConvertUTCTime_6
   \   00011D   12....       LCALL   ??Subroutine5_0 & 0xFFFF
    344              }
   \                     ??CrossCallReturnLabel_9:
   \   000120   12....       LCALL   ?US_DIV_MOD
   \   000123   8B..         MOV     ?V1,R3
   \   000125   EA           MOV     A,R2
   \   000126   45..         ORL     A,?V1
   \   000128   601E         JZ      ??osal_ConvertUTCTime_7
   \   00012A   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   00012D   12....       LCALL   ?US_DIV_MOD
   \   000130   8B..         MOV     ?V1,R3
   \   000132   EA           MOV     A,R2
   \   000133   45..         ORL     A,?V1
   \   000135   6089         JZ      ??osal_ConvertUTCTime_1
   \   000137   8E82         MOV     DPL,R6
   \   000139   8F83         MOV     DPH,R7
   \   00013B   A3           INC     DPTR
   \   00013C   A3           INC     DPTR
   \   00013D   A3           INC     DPTR
   \   00013E   A3           INC     DPTR
   \   00013F   A3           INC     DPTR
   \   000140   E0           MOVX    A,@DPTR
   \   000141   5403         ANL     A,#0x3
   \   000143   6003         JZ      $+5
   \   000145   02....       LJMP    ??osal_ConvertUTCTime_1 & 0xFFFF
   \                     ??osal_ConvertUTCTime_7:
   \   000148   786E         MOV     R0,#0x6e
   \   00014A   02....       LJMP    ??osal_ConvertUTCTime_2 & 0xFFFF
    345          
    346              tm->month = 0;
   \                     ??osal_ConvertUTCTime_6:
   \   00014D   E4           CLR     A
   \   00014E   802B         SJMP    ??osal_ConvertUTCTime_8
    347              while ( numDays >= monthLength( IsLeapYear( tm->year ), tm->month ) )
    348              {
    349                numDays -= monthLength( IsLeapYear( tm->year ), tm->month );
   \                     ??osal_ConvertUTCTime_9:
   \   000150   7900         MOV     R1,#0x0
   \                     ??osal_ConvertUTCTime_10:
   \   000152   EE           MOV     A,R6
   \   000153   2404         ADD     A,#0x4
   \   000155   F5..         MOV     ?V0,A
   \   000157   E4           CLR     A
   \   000158   3F           ADDC    A,R7
   \   000159   F5..         MOV     ?V1,A
   \   00015B                ; Setup parameters for call to function monthLength
   \   00015B   85..82       MOV     DPL,?V0
   \   00015E   F583         MOV     DPH,A
   \   000160   E0           MOVX    A,@DPTR
   \   000161   FA           MOV     R2,A
   \   000162   12....       LCALL   `??monthLength::?relay`; Banked call to: monthLength
   \   000165   E9           MOV     A,R1
   \   000166   F8           MOV     R0,A
   \   000167   C3           CLR     C
   \   000168   E5..         MOV     A,?V2
   \   00016A   98           SUBB    A,R0
   \   00016B   F5..         MOV     ?V2,A
   \   00016D   E5..         MOV     A,?V3
   \   00016F   9400         SUBB    A,#0x0
   \   000171   F5..         MOV     ?V3,A
    350                tm->month++;
   \   000173   85..82       MOV     DPL,?V0
   \   000176   85..83       MOV     DPH,?V1
   \   000179   E0           MOVX    A,@DPTR
   \   00017A   04           INC     A
   \                     ??osal_ConvertUTCTime_8:
   \   00017B   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00017E   12....       LCALL   ?US_DIV_MOD
   \   000181   8B..         MOV     ?V1,R3
   \   000183   EA           MOV     A,R2
   \   000184   45..         ORL     A,?V1
   \   000186   601B         JZ      ??osal_ConvertUTCTime_11
   \   000188   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   00018B   12....       LCALL   ?US_DIV_MOD
   \   00018E   8B..         MOV     ?V1,R3
   \   000190   EA           MOV     A,R2
   \   000191   45..         ORL     A,?V1
   \   000193   6012         JZ      ??osal_ConvertUTCTime_12
   \   000195   8E82         MOV     DPL,R6
   \   000197   8F83         MOV     DPH,R7
   \   000199   A3           INC     DPTR
   \   00019A   A3           INC     DPTR
   \   00019B   A3           INC     DPTR
   \   00019C   A3           INC     DPTR
   \   00019D   A3           INC     DPTR
   \   00019E   E0           MOVX    A,@DPTR
   \   00019F   5403         ANL     A,#0x3
   \   0001A1   7004         JNZ     ??osal_ConvertUTCTime_12
   \                     ??osal_ConvertUTCTime_11:
   \   0001A3   7901         MOV     R1,#0x1
   \   0001A5   8002         SJMP    ??osal_ConvertUTCTime_13
   \                     ??osal_ConvertUTCTime_12:
   \   0001A7   7900         MOV     R1,#0x0
   \                     ??osal_ConvertUTCTime_13:
   \   0001A9                ; Setup parameters for call to function monthLength
   \   0001A9   8E82         MOV     DPL,R6
   \   0001AB   8F83         MOV     DPH,R7
   \   0001AD   A3           INC     DPTR
   \   0001AE   A3           INC     DPTR
   \   0001AF   A3           INC     DPTR
   \   0001B0   A3           INC     DPTR
   \   0001B1   E0           MOVX    A,@DPTR
   \   0001B2   FA           MOV     R2,A
   \   0001B3   12....       LCALL   `??monthLength::?relay`; Banked call to: monthLength
   \   0001B6   E9           MOV     A,R1
   \   0001B7   F8           MOV     R0,A
   \   0001B8   C3           CLR     C
   \   0001B9   E5..         MOV     A,?V2
   \   0001BB   98           SUBB    A,R0
   \   0001BC   E5..         MOV     A,?V3
   \   0001BE   9400         SUBB    A,#0x0
   \   0001C0   8E82         MOV     DPL,R6
   \   0001C2   8F83         MOV     DPH,R7
   \   0001C4   A3           INC     DPTR
   \   0001C5   A3           INC     DPTR
   \   0001C6   A3           INC     DPTR
   \   0001C7   4033         JC      ??osal_ConvertUTCTime_14
   \   0001C9   12....       LCALL   ??Subroutine4_0 & 0xFFFF
    351              }
   \                     ??CrossCallReturnLabel_10:
   \   0001CC   12....       LCALL   ?US_DIV_MOD
   \   0001CF   8B..         MOV     ?V1,R3
   \   0001D1   EA           MOV     A,R2
   \   0001D2   45..         ORL     A,?V1
   \   0001D4   6021         JZ      ??osal_ConvertUTCTime_15
   \   0001D6   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   0001D9   12....       LCALL   ?US_DIV_MOD
   \   0001DC   8B..         MOV     ?V1,R3
   \   0001DE   EA           MOV     A,R2
   \   0001DF   45..         ORL     A,?V1
   \   0001E1   7003         JNZ     $+5
   \   0001E3   02....       LJMP    ??osal_ConvertUTCTime_9 & 0xFFFF
   \   0001E6   8E82         MOV     DPL,R6
   \   0001E8   8F83         MOV     DPH,R7
   \   0001EA   A3           INC     DPTR
   \   0001EB   A3           INC     DPTR
   \   0001EC   A3           INC     DPTR
   \   0001ED   A3           INC     DPTR
   \   0001EE   A3           INC     DPTR
   \   0001EF   E0           MOVX    A,@DPTR
   \   0001F0   5403         ANL     A,#0x3
   \   0001F2   6003         JZ      $+5
   \   0001F4   02....       LJMP    ??osal_ConvertUTCTime_9 & 0xFFFF
   \                     ??osal_ConvertUTCTime_15:
   \   0001F7   7901         MOV     R1,#0x1
   \   0001F9   02....       LJMP    ??osal_ConvertUTCTime_10 & 0xFFFF
    352          
    353              tm->day = numDays;
   \                     ??osal_ConvertUTCTime_14:
   \   0001FC   E5..         MOV     A,?V2
   \   0001FE   F0           MOVX    @DPTR,A
    354            }
    355          }
   \   0001FF   7F10         MOV     R7,#0x10
   \   000201   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008                REQUIRE ??Subroutine4_0
   \   000008                ; // Fall through to label ??Subroutine4_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine4_0:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine5_0
   \   000001                ; // Fall through to label ??Subroutine5_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine5_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F8           MOV     R0,A
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F9           MOV     R1,A
   \   000006   7A90         MOV     R2,#-0x70
   \   000008   7B01         MOV     R3,#0x1
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   8E82         MOV     DPL,R6
   \   000002   8F83         MOV     DPH,R7
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   F8           MOV     R0,A
   \   00000B   A3           INC     DPTR
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F9           MOV     R1,A
   \   00000E   7A64         MOV     R2,#0x64
   \   000010   7B00         MOV     R3,#0x0
   \   000012   22           RET
    356          
    357          /*********************************************************************
    358           * @fn      monthLength
    359           *
    360           * @param   lpyr - 1 for leap year, 0 if not
    361           *
    362           * @param   mon - 0 - 11 (jan - dec)
    363           *
    364           * @return  number of days in specified month
    365           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    366          static uint8 monthLength( uint8 lpyr, uint8 mon )
   \                     monthLength:
    367          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
    368            uint8 days = 31;
   \   000002   791F         MOV     R1,#0x1f
    369          
    370          	if ( mon == 1 ) // feb
   \   000004   7401         MOV     A,#0x1
   \   000006   6A           XRL     A,R2
   \   000007   7006         JNZ     ??monthLength_0
    371            {
    372          		days = ( 28 + lpyr );
   \   000009   741C         MOV     A,#0x1c
   \   00000B   28           ADD     A,R0
   \   00000C   F9           MOV     R1,A
   \   00000D   800E         SJMP    ??monthLength_1
    373            }
    374            else
    375            {
    376              if ( mon > 6 ) // aug-dec
   \                     ??monthLength_0:
   \   00000F   EA           MOV     A,R2
   \   000010   C3           CLR     C
   \   000011   9407         SUBB    A,#0x7
   \   000013   4001         JC      ??monthLength_2
    377              {
    378                mon--;
   \   000015   1A           DEC     R2
    379              }
    380          
    381              if ( mon & 1 )
   \                     ??monthLength_2:
   \   000016   EA           MOV     A,R2
   \   000017   A2E0         MOV     C,0xE0 /* A   */.0
   \   000019   5002         JNC     ??monthLength_1
    382              {
    383                days = 30;
   \   00001B   791E         MOV     R1,#0x1e
    384              }
    385            }
    386          
    387          	return ( days );
   \                     ??monthLength_1:
   \   00001D   02....       LJMP    ?BRET
    388          }
    389          
    390          /*********************************************************************
    391           * @fn      osal_ConvertUTCSecs
    392           *
    393           * @brief   Converts a UTCTimeStruct to UTCTime
    394           *
    395           * @param   tm - pointer to provided struct
    396           *
    397           * @return  number of seconds since 00:00:00 on 01/01/2000 (UTC)
    398           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    399          UTCTime osal_ConvertUTCSecs( UTCTimeStruct *tm )
   \                     osal_ConvertUTCSecs:
    400          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000                REQUIRE ?V10
   \   000000                REQUIRE ?V11
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    401            uint32 seconds;
    402          
    403            /* Seconds for the partial day */
    404            seconds = (((tm->hour * 60UL) + tm->minutes) * 60UL) + tm->seconds;
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F5..         MOV     ?V4,A
   \   000012   E4           CLR     A
   \   000013   F5..         MOV     ?V5,A
   \   000015   F5..         MOV     ?V6,A
   \   000017   F5..         MOV     ?V7,A
   \   000019   90....       MOV     DPTR,#__Constant_3c
   \   00001C   78..         MOV     R0,#?V0
   \   00001E   12....       LCALL   ?L_MOV_X
   \   000021   78..         MOV     R0,#?V4
   \   000023   79..         MOV     R1,#?V0
   \   000025   12....       LCALL   ?L_MUL
   \   000028   8E82         MOV     DPL,R6
   \   00002A   8F83         MOV     DPH,R7
   \   00002C   A3           INC     DPTR
   \   00002D   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000030   12....       LCALL   ?L_ADD
   \   000033   90....       MOV     DPTR,#__Constant_3c
   \   000036   78..         MOV     R0,#?V0
   \   000038   12....       LCALL   ?L_MOV_X
   \   00003B   78..         MOV     R0,#?V4
   \   00003D   79..         MOV     R1,#?V0
   \   00003F   12....       LCALL   ?L_MUL
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000049   12....       LCALL   ?L_ADD
    405          
    406            /* Account for previous complete days */
    407            {
    408              /* Start with complete days in current month */
    409              uint16 days = tm->day;
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   F5..         MOV     ?V0,A
    410          
    411              /* Next, complete months in current year */
    412              {
    413                int8 month = tm->month;
   \   000052   8E82         MOV     DPL,R6
   \   000054   8F83         MOV     DPH,R7
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   F5..         MOV     ?V2,A
   \   00005D   8011         SJMP    ??osal_ConvertUTCSecs_0
    414                while ( --month >= 0 )
    415                {
    416                  days += monthLength( IsLeapYear( tm->year ), month );
   \                     ??osal_ConvertUTCSecs_1:
   \   00005F   7900         MOV     R1,#0x0
   \                     ??osal_ConvertUTCSecs_2:
   \   000061                ; Setup parameters for call to function monthLength
   \   000061   AA..         MOV     R2,?V2
   \   000063   12....       LCALL   `??monthLength::?relay`; Banked call to: monthLength
   \   000066   E5..         MOV     A,?V0
   \   000068   29           ADD     A,R1
   \   000069   F5..         MOV     ?V0,A
   \   00006B   E4           CLR     A
   \   00006C   35..         ADDC    A,?V1
   \   00006E   F5..         MOV     ?V1,A
   \                     ??osal_ConvertUTCSecs_0:
   \   000070   74FF         MOV     A,#-0x1
   \   000072   25..         ADD     A,?V2
   \   000074   F5..         MOV     ?V2,A
   \   000076   C3           CLR     C
   \   000077   9400         SUBB    A,#0x0
   \   000079   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00007B   65D0         XRL     A,PSW
   \   00007D   33           RLC     A
   \   00007E   8E82         MOV     DPL,R6
   \   000080   8F83         MOV     DPH,R7
   \   000082   A3           INC     DPTR
   \   000083   A3           INC     DPTR
   \   000084   A3           INC     DPTR
   \   000085   A3           INC     DPTR
   \   000086   A3           INC     DPTR
   \   000087   E0           MOVX    A,@DPTR
   \   000088   4031         JC      ??osal_ConvertUTCSecs_3
   \   00008A   F8           MOV     R0,A
   \   00008B   A3           INC     DPTR
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   F9           MOV     R1,A
   \   00008E   7A90         MOV     R2,#-0x70
   \   000090   7B01         MOV     R3,#0x1
   \   000092   12....       LCALL   ?US_DIV_MOD
   \   000095   8B..         MOV     ?V9,R3
   \   000097   EA           MOV     A,R2
   \   000098   45..         ORL     A,?V9
   \   00009A   601B         JZ      ??osal_ConvertUTCSecs_4
   \   00009C   12....       LCALL   ?Subroutine1 & 0xFFFF
    417                }
    418              }
   \                     ??CrossCallReturnLabel_4:
   \   00009F   12....       LCALL   ?US_DIV_MOD
   \   0000A2   8B..         MOV     ?V9,R3
   \   0000A4   EA           MOV     A,R2
   \   0000A5   45..         ORL     A,?V9
   \   0000A7   60B6         JZ      ??osal_ConvertUTCSecs_1
   \   0000A9   8E82         MOV     DPL,R6
   \   0000AB   8F83         MOV     DPH,R7
   \   0000AD   A3           INC     DPTR
   \   0000AE   A3           INC     DPTR
   \   0000AF   A3           INC     DPTR
   \   0000B0   A3           INC     DPTR
   \   0000B1   A3           INC     DPTR
   \   0000B2   E0           MOVX    A,@DPTR
   \   0000B3   5403         ANL     A,#0x3
   \   0000B5   70A8         JNZ     ??osal_ConvertUTCSecs_1
   \                     ??osal_ConvertUTCSecs_4:
   \   0000B7   7901         MOV     R1,#0x1
   \   0000B9   80A6         SJMP    ??osal_ConvertUTCSecs_2
    419          
    420              /* Next, complete years before current year */
    421              {
    422                uint16 year = tm->year;
   \                     ??osal_ConvertUTCSecs_3:
   \   0000BB   FC           MOV     R4,A
   \   0000BC   A3           INC     DPTR
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   FD           MOV     R5,A
   \   0000BF   800D         SJMP    ??osal_ConvertUTCSecs_5
    423                while ( --year >= BEGYEAR )
    424                {
    425                  days += YearLength( year );
   \                     ??osal_ConvertUTCSecs_6:
   \   0000C1   786D         MOV     R0,#0x6d
   \                     ??osal_ConvertUTCSecs_7:
   \   0000C3   E5..         MOV     A,?V0
   \   0000C5   28           ADD     A,R0
   \   0000C6   F5..         MOV     ?V0,A
   \   0000C8   E5..         MOV     A,?V1
   \   0000CA   3401         ADDC    A,#0x1
   \   0000CC   F5..         MOV     ?V1,A
   \                     ??osal_ConvertUTCSecs_5:
   \   0000CE   EC           MOV     A,R4
   \   0000CF   24FF         ADD     A,#-0x1
   \   0000D1   1C           DEC     R4
   \   0000D2   ED           MOV     A,R5
   \   0000D3   34FF         ADDC    A,#-0x1
   \   0000D5   FD           MOV     R5,A
   \   0000D6   C3           CLR     C
   \   0000D7   EC           MOV     A,R4
   \   0000D8   94D0         SUBB    A,#-0x30
   \   0000DA   ED           MOV     A,R5
   \   0000DB   9407         SUBB    A,#0x7
   \   0000DD   402D         JC      ??osal_ConvertUTCSecs_8
   \   0000DF   EC           MOV     A,R4
   \   0000E0   F8           MOV     R0,A
   \   0000E1   ED           MOV     A,R5
   \   0000E2   F9           MOV     R1,A
   \   0000E3   7A90         MOV     R2,#-0x70
   \   0000E5   7B01         MOV     R3,#0x1
   \   0000E7   12....       LCALL   ?US_DIV_MOD
   \   0000EA   8B..         MOV     ?V3,R3
   \   0000EC   EA           MOV     A,R2
   \   0000ED   45..         ORL     A,?V3
   \   0000EF   6017         JZ      ??osal_ConvertUTCSecs_9
   \   0000F1   EC           MOV     A,R4
   \   0000F2   F8           MOV     R0,A
   \   0000F3   ED           MOV     A,R5
   \   0000F4   F9           MOV     R1,A
   \   0000F5   7A64         MOV     R2,#0x64
   \   0000F7   7B00         MOV     R3,#0x0
   \   0000F9   12....       LCALL   ?US_DIV_MOD
   \   0000FC   8B..         MOV     ?V3,R3
   \   0000FE   EA           MOV     A,R2
   \   0000FF   45..         ORL     A,?V3
   \   000101   60BE         JZ      ??osal_ConvertUTCSecs_6
   \   000103   EC           MOV     A,R4
   \   000104   5403         ANL     A,#0x3
   \   000106   70B9         JNZ     ??osal_ConvertUTCSecs_6
   \                     ??osal_ConvertUTCSecs_9:
   \   000108   786E         MOV     R0,#0x6e
   \   00010A   80B7         SJMP    ??osal_ConvertUTCSecs_7
    426                }
    427              }
    428          
    429              /* Add total seconds before partial day */
    430              seconds += (days * DAY);
    431            }
    432          
    433            return ( seconds );
   \                     ??osal_ConvertUTCSecs_8:
   \   00010C   E4           CLR     A
   \   00010D   F5..         MOV     ?V2,A
   \   00010F   F5..         MOV     ?V3,A
   \   000111   90....       MOV     DPTR,#__Constant_15180
   \   000114   78..         MOV     R0,#?V8
   \   000116   12....       LCALL   ?L_MOV_X
   \   000119   78..         MOV     R0,#?V0
   \   00011B   79..         MOV     R1,#?V8
   \   00011D   12....       LCALL   ?L_MUL
   \   000120   78..         MOV     R0,#?V4
   \   000122   79..         MOV     R1,#?V0
   \   000124   12....       LCALL   ?L_ADD
   \   000127   AA..         MOV     R2,?V4
   \   000129   AB..         MOV     R3,?V5
   \   00012B   AC..         MOV     R4,?V6
   \   00012D   AD..         MOV     R5,?V7
   \   00012F   02....       LJMP    ?Subroutine0 & 0xFFFF
    434          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0,A
   \   000003   E4           CLR     A
   \   000004   F5..         MOV     ?V1,A
   \   000006   F5..         MOV     ?V2,A
   \   000008   F5..         MOV     ?V3,A
   \   00000A   78..         MOV     R0,#?V4
   \   00000C   79..         MOV     R1,#?V0
   \   00000E   22           RET

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4:
   \   000000   04000000     DD 4

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_fffce019:
   \   000000   19E0FCFF     DD 4294762521

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_fff8:
   \   000000   F8FF0000     DD 65528

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_31fe7:
   \   000000   E71F0300     DD 204775

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3e8:
   \   000000   E8030000     DD 1000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_15180:
   \   000000   80510100     DD 86400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3c:
   \   000000   3C000000     DD 60

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_e10:
   \   000000   100E0000     DD 3600

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??osalTimeUpdate::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osalTimeUpdate

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??osal_setClock::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_setClock

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??osal_getClock::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_getClock

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??osal_ConvertUTCTime::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_ConvertUTCTime

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??monthLength::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    monthLength

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??osal_ConvertUTCSecs::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_ConvertUTCSecs

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      0     24   monthLength
      0     22   osalTimeUpdate
        0     20   -> macMcuPrecisionCount
        0     22   -> osalMcuDivide31By16To16
        0     20   -> osalTimerUpdate
      0     20   osal_ConvertUTCSecs
        0     20   -> monthLength
      1     28   osal_ConvertUTCTime
        0     24   -> monthLength
      2      0   osal_getClock
      0     12   osal_setClock


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       1  ??Subroutine4_0
      11  ??Subroutine5_0
       5  ?Subroutine0
      19  ?Subroutine1
       8  ?Subroutine2
      15  ?Subroutine3
       4  OSAL_timeSeconds
       1  _A_IEN0
       4  __Constant_15180
       4  __Constant_31fe7
       4  __Constant_3c
       4  __Constant_3e8
       4  __Constant_4
       4  __Constant_e10
       4  __Constant_fff8
       4  __Constant_fffce019
      32  monthLength
       6  monthLength::?relay
     321  osalTimeUpdate
       6  osalTimeUpdate::?relay
     306  osal_ConvertUTCSecs
       6  osal_ConvertUTCSecs::?relay
     516  osal_ConvertUTCTime
       6  osal_ConvertUTCTime::?relay
      17  osal_getClock
       6  osal_getClock::?relay
      41  osal_setClock
       6  osal_setClock::?relay
       4  previousMacTimerTick
       2  remUsTicks
       4  timeMSec

 
 1 292 bytes in segment BANKED_CODE
    36 bytes in segment BANK_RELAYS
     1 byte  in segment SFR_AN
    32 bytes in segment XDATA_ROM_C
    14 bytes in segment XDATA_Z
 
 1 328 bytes of CODE  memory
     0 bytes of CONST memory (+ 32 bytes shared)
     0 bytes of DATA  memory (+  1 byte  shared)
    14 bytes of XDATA memory

Errors: none
Warnings: none
